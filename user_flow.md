# 学科竞赛管理平台 —— 用户操作流程与状态流转说明

## 1. 文档目的

本文档用于描述《学科竞赛管理平台》中各类用户（管理员、教师、学生）的**注册、登录与核心操作流程**，以及系统在不同操作下的**状态变化与业务约束**。  
本文档与 `scope_requirements.md` 配套使用，作为系统实现、测试与验收的流程依据。

---

## 2. 账号体系与认证流程（所有角色通用）

### 流程 0：用户注册（工号 / 学号 + 密码）

**适用角色**
- 学生
- 教师
- 管理员（可由系统初始化或管理员创建）

**注册规则**
- 所有用户均使用【工号 / 学号 + 密码】进行注册
- 工号 / 学号在系统中唯一
- 注册时需明确用户角色（学生 / 教师 / 管理员）

**流程步骤**
1. 用户进入注册页面
2. 选择用户角色：
   - 学生
   - 教师
   - 管理员（一般由系统初始化或管理员创建）
3. 输入以下信息：
   - 工号 / 学号
   - 密码
   - 确认密码
   - 姓名
   - 联系方式（手机号或邮箱至少一项）
4. 提交注册申请

**系统响应**
- 校验工号 / 学号唯一性
- 注册成功后生成用户账号
- 用户可使用该账号进行登录

---

### 流程 1：用户登录（工号 / 学号 + 密码）

**适用角色**
- 管理员
- 教师
- 学生

**流程步骤**
1. 用户进入登录页面
2. 输入：
   - 工号 / 学号
   - 密码
3. 点击“登录”

**系统响应**
- 校验账号与密码
- 登录成功后，根据用户角色跳转至对应首页：
  - 管理员 → 管理员控制台
  - 教师 → 教师工作台
  - 学生 → 学生首页

**异常处理**
- 工号 / 学号不存在：提示账号不存在
- 密码错误：提示密码错误

---

### 流程 2：用户退出登录

**流程步骤**
1. 用户点击“退出登录”

**系统响应**
- 清除登录状态
- 返回登录页面

---

## 3. 管理员（Admin）相关流程

---

### 流程 3：发布竞赛（含技能与人数规则）

**前置条件**
- 管理员已登录

**流程步骤**
1. 管理员进入“竞赛管理”页面
2. 点击“创建竞赛”
3. 填写竞赛基础信息：
   - 名称、简介、类别、级别
   - 报名截止时间
   - 竞赛开始时间、结束时间
4. 配置参赛人数规则：
   - 单人参赛（1–1）
   - 固定人数参赛（N–N）
   - 范围人数参赛（min–max）
5. 选择竞赛建议具备的技能
6. 点击“发布竞赛”

**系统响应**
- 竞赛创建成功
- 竞赛状态由系统自动计算
- 竞赛对教师与学生可见

---

### 流程 4：审核教师申请成为指导教师

**前置条件**
- 教师已提交指导教师申请

**流程步骤**
1. 管理员进入“教师申请审核”页面
2. 查看申请详情：
   - 教师信息
   - 竞赛信息
   - 技能方向
3. 选择“通过”或“拒绝”

**系统响应**
- 通过：
  - 系统在对应竞赛下生成一个教师组
- 拒绝：
  - 申请结束，不生成组别

---

### 流程 5：管理员全局管理与兜底操作

**可执行操作**
- 查看所有竞赛、组别与成员
- 强制结束或重新开放组队
- 移除任意组内成员
- 查看并处理异常报名申请
- （可选）创建或禁用用户账号

---

## 4. 教师（Teacher）相关流程

---

### 流程 6：申请成为竞赛指导教师

**前置条件**
- 教师已登录
- 竞赛处于报名期

**流程步骤**
1. 教师浏览竞赛列表
2. 进入竞赛详情页
3. 点击“申请成为指导教师”
4. 选择或确认该组关注的技能方向
5. 提交申请

**系统响应**
- 生成指导教师申请
- 状态为【待管理员审核】

---

### 流程 7：审核学生报名申请

**前置条件**
- 教师组已生成

**流程步骤**
1. 教师进入“我的组别”
2. 查看待审核学生列表
3. 对申请进行操作：
   - 通过
   - 拒绝

**系统响应**
- 通过：
  - 学生成为组内成员
  - 组内人数 +1
- 拒绝：
  - 学生状态更新为【已拒绝】

**约束规则**
- 达到最大人数后：
  - 禁止通过新申请
  - 组别显示“人数已满”
- 若学生通过该组审核：
  - 该学生在该竞赛下的组归属锁定
  - 系统禁止其向该竞赛下其他组提交新的报名申请

---

### 流程 8：结束组队与成员移除

**流程步骤**
1. 教师进入组别详情
2. 当组内人数 ≥ 最小人数要求时：
   - 点击“结束组队”

**系统响应**
- 组别状态更新为【组队已结束】
- 禁止新成员加入

**成员移除**
- 教师可移除已通过成员
- 名额释放（若组队未结束）
- 成员被移除后：学生在该竞赛下不再属于任何组，可重新向该竞赛下的教师组提交报名申请

---

## 5. 学生（Student）相关流程

---

### 流程 9：维护个人技能画像

**前置条件**
- 学生已登录

**流程步骤**
1. 学生进入“个人中心”
2. 打开“我的技能”
3. 选择或取消技能
4. 保存

**系统响应**
- 技能画像更新
- 推荐排序逻辑生效

---

### 流程 10：浏览竞赛列表（技能推荐）

**流程步骤**
1. 学生进入竞赛列表页
2. 系统加载竞赛数据
3. 根据以下因素进行排序：
   - 学生技能画像
   - 竞赛技能需求

**系统响应**
- 技能匹配度高的竞赛优先展示
- 标注“推荐竞赛”

**冷启动**
- 无技能画像时按默认排序展示

### 流程 10-1：竞赛检索与筛选

**前置条件**
- 学生已登录

**流程步骤**
1. 学生在竞赛列表页输入竞赛名称关键词，或选择竞赛状态筛选条件
2. 点击“搜索 / 筛选”

**系统响应**
- 系统根据检索条件返回符合条件的竞赛列表
- 检索结果支持分页展示
- 当存在检索条件时，优先展示检索结果，不再按推荐排序

---

### 流程 11：选择教师组并提交报名申请

**前置条件**
- 竞赛处于报名期
- 至少存在一个已审核通过的教师组
- 报名截止时间后，不再允许提交新的报名申请；已提交的申请仍可由教师或管理员进行审核。

**流程步骤**
1. 学生进入竞赛详情页
2. 查看教师组列表：
   - 教师信息
   - 技能方向
   - 当前人数 / 最大人数
3. 选择未满员、未结束组队的组
4. 点击“申请加入”

**系统响应**
- 创建报名申请
- 状态为【待审核】

**报名校验规则**
- 系统在提交报名申请前，需校验该学生在当前竞赛下是否已存在：
  - 状态为【待审核】的申请，或
  - 状态为【已通过】的组归属
- 若存在上述情况，则禁止提交新的报名申请，并提示学生先等待审核或联系指导教师处理

---

### 流程 12：查看组内成员信息

**前置条件**
- 报名申请已通过

**流程步骤**

1. 学生进入“我的竞赛 / 我的组别”
2. 查看组详情

**系统响应**
- 展示：
  - 指导教师信息
  - 组内成员列表（姓名、学号、联系方式）

### 流程 13：组内讨论区交流

**前置条件**
- 学生报名申请已通过，成为该组成员

**流程步骤**
1. 学生进入“我的组别”页面
2. 打开“组内讨论区”
3. 发布讨论内容或回复已有讨论

**系统响应**
- 讨论内容实时展示在组内讨论区
- 仅组内成员、指导教师与管理员可见
- 讨论内容可由发布者、该组指导教师或管理员删除

### 流程 14：作品文件提交

**前置条件**
- 学生已通过审核，属于某教师组

**流程步骤**
1. 学生进入“我的组别”页面
2. 打开“作品提交”
3. 选择文件并填写提交备注
4. 点击“提交”

**系统响应**
- 系统保存本次提交记录
- 若存在历史提交记录，则最新提交覆盖为当前有效版本
- 组内成员可查看本组的历史提交记录
- 指导教师与管理员可查看并下载全部提交记录

### 流程 15：管理员发布竞赛奖项

前置条件：
- 竞赛已结束
- 队伍已停止招募

流程步骤：
1. 管理员选择竞赛与队伍
2. 输入奖项名称
3. 确认发布

系统响应：
- 冻结当前队伍成员作为获奖人
- 写入获奖记录

### 流程 16：队伍自动解散（系统触发）

触发条件：
- 队伍处于已停止招募状态
- 成员移除后人数不足最小要求

系统响应：
- 队伍状态更新为 DISBANDED
- 后续所有写操作被拒绝

---

## 6. 状态流转说明

---

### 6.1 报名申请状态

未申请->待审核->已通过/已拒绝->已移除

### 6.2 组队状态

组队中->（教师 / 管理员操作，且人数 ≥ 最小人数）->组队已结束



## 7. 说明

- 所有用户均通过【工号 / 学号 + 密码】完成注册与登录
- 本文档仅描述用户操作流程与系统逻辑
- 不涉及数据库设计与技术实现
- 未在本文档中明确的流程不视为系统必需实现内容