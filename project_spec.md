# Project Specification（学科竞赛管理平台 · 统一项目说明）

> 本文件为 **PROJECT_BRIEF.md + scope_requirements.md + user_flow.md** 的合并与收敛版本，
> 用于作为 Codex / AI 在项目开发阶段的 **唯一业务与流程依据**。
>
> 目标：减少上下文分散与 token 消耗，防止需求与流程理解偏移。
>
> 重要说明：
> - 本文件描述 **做什么、怎么走流程、必须遵守哪些规则**
> - 不描述数据库结构与技术实现细节
> - 不记录项目历史状态（历史以 PROJECT_CHANGELOG.md 为准）

---

## 1. 项目定位与边界（Project Positioning）

### 1.1 项目一句话说明
本项目是一个：  
**基于 Spring Boot 的学科竞赛管理平台毕业设计项目，包含基础管理功能与教学级推荐算法模块。**

本项目不是：  
- 生产级商业系统  
- 高并发 / 高可用系统  
- 工业级推荐系统

### 1.2 项目用途
- 本科毕业设计（毕设）
- 课程实践与综合应用展示

### 1.3 核心原则
- 功能完整但实现简洁
- 逻辑清晰、可解释、可答辩
- 避免过度设计

---

## 2. 项目目标与非目标

### 2.1 必须实现的目标
- 学科竞赛信息管理与展示
- 教师组别管理与学生报名审核
- 组队控制与成员信息可视化
- 基于技能画像的竞赛推荐展示（教学级）

### 2.2 明确不实现的功能（非目标）
- 群聊、私信、复杂讨论区
- 复杂文件评审与成果打分体系
- 自动分配教师或组别
- 多教师共同管理同一组
- 深度学习推荐模型或实时推荐系统

> 未在本文件中明确列出的功能，均不视为本项目必需实现内容。

---

## 3. 系统角色与权限

系统仅包含以下三类角色：

### 3.1 管理员（Admin）
- 发布与维护竞赛
- 配置技能与人数规则
- 审核教师申请
- 全局管理与兜底操作

### 3.2 教师（Teacher）
- 申请成为竞赛指导教师
- 审核学生报名申请
- 管理所负责组别的成员与组队状态

### 3.3 学生（Student）
- 维护个人技能画像
- 浏览与检索竞赛
- 选择教师组并提交报名申请
- 通过后参与组队并查看组内成员信息

---

## 4. 核心业务流程（精简版）

### 4.1 教师申请 → 教师组生成
1. 教师在竞赛详情页提交指导教师申请（可选择技能方向）
2. 管理员审核申请
3. 审核通过后：
   - 系统在该竞赛下生成该教师唯一的教师组

### 4.2 学生报名 → 审核 → 入队
1. 学生浏览竞赛并查看教师组列表
2. 选择一个未满员、未结束组队的教师组提交报名申请
3. 教师审核申请：
   - 通过 → 学生成为组内成员
   - 拒绝 → 申请结束

### 4.3 结束组队与成员移除
- 当组内人数 ≥ 最小人数要求时：
  - 教师或管理员可结束组队
- 结束组队后：
  - 禁止新成员加入或通过审核
- 教师 / 管理员可移除成员：
  - 若组队未结束，名额释放
  - 被移除学生可重新申请该竞赛下的教师组

### 4.4 组内成员信息查看
- 管理员：可查看所有组与成员
- 教师：可查看自己负责的组与成员
- 学生：仅可查看自己所在组的成员

---

## 5. 关键业务规则与约束（必须遵守）

### 5.1 报名排他规则
- 同一学生在同一竞赛中，同一时间仅允许存在：
  - 一条【待审核】或
  - 一条【已通过】的报名状态
- 若存在上述状态：
  - 禁止该学生向该竞赛下的其他组提交新的报名申请

### 5.2 报名截止时间规则
- 报名截止时间后：
  - 禁止提交新的报名申请
  - 已提交的申请仍可由教师或管理员审核

### 5.3 组队人数规则
- 每个竞赛统一配置参赛人数规则（min–max）
- 达到最大人数后：
  - 组别显示“人数已满”
  - 禁止通过新申请

### 5.4 重新申请规则
- 学生被移除或申请被拒绝后：
  - 不再属于该竞赛任何组
  - 可重新向该竞赛下的教师组提交报名申请

---

## 6. 基于技能的竞赛推荐（教学级）

### 6.1 推荐依据
- 学生技能画像
- 竞赛配置的技能需求

### 6.2 推荐方式
- 在竞赛列表页：
  - 根据技能匹配度对竞赛进行排序
  - 匹配度高的竞赛优先展示
- 可标注“推荐竞赛”“与你技能匹配度高”等提示

### 6.3 冷启动规则
- 学生未配置技能时：
  - 按默认规则展示竞赛列表
  - 提示完善技能画像

---

## 7. 状态流转说明（摘要）

### 7.1 报名申请状态
未申请 → 待审核 → 已通过 / 已拒绝 → 已移除

### 7.2 组队状态
组队中 →（人数 ≥ 最小人数 + 教师/管理员操作）→ 组队已结束

---

## 8. 与其他文件的关系说明

- **agent.md**
  - 定义 AI 行为边界与输出规范
- **db_schema.md / 新数据库表结构_v3.md**
  - 定义数据库结构（冻结，不在本文件描述）
- **PROJECT_CHANGELOG.md**
  - 记录项目做到哪一步（唯一事实源）

> 若本文件与 agent.md 冲突：以 agent.md 为准  
> 若本文件与 PROJECT_CHANGELOG.md 冲突：以代码 + commit 为准

---

## 9. 一句话总原则

> **规则清晰 > 实现复杂  
> 流程可答辩 > 功能堆叠**
